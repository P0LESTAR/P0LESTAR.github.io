---
title: Android OS구조
author: P0LESTAR
date: 2026-01-04 00:01:01 +0800
categories: [모바일해킹]
tags: [모바일해킹, 안드로이드, 안드로이드OS]
#pin: true
sitemap:
  changefreq: monthly
  priority: 0.1
image:
  path: assets\img\Android.png
---



![Desktop View](/assets\img\AndroidOS.png){: .w-50 .right}

## 개요
안드로이드 OS는 크게 5가지 계층으로 이뤄졌습니다.

- Linux Kernel
- Hardware Abstraction Layer (하드웨어 추상화 계층)
- Native C/C++ Libraries & Android Runtime (ART)
- Java API Framework
- Application Layer

---

## 1. Linux Kernel (리눅스 커널)
>안드로이드의 기반이 되는 가장 하위 계층입니다. 
안드로이드는 리눅스 커널(주로 LTS 버전)을 수정하여 사용하며, 하드웨어와 소프트웨어 사이의 다리 역할을 합니다.

### 주요 역할

- 보안 모델: 각 앱에 고유한 사용자 ID(UID)를 부여하여 앱 간의 접근을 차단하는 '샌드박스'를 구현합니다.
- 메모리 관리: 수많은 프로세스가 효율적으로 메모리를 나눠 쓰도록 관리합니다.
- 프로세스 관리: 앱의 실행과 종료, 우선순위를 제어합니다.
- 드라이버: 오디오, 디스플레이, 블루투스, 카메라 등 하드웨어를 직접 제어하는 드라이버가 포함됩니다.
- Binder (IPC): 안드로이드에서 프로세스 간 통신을 가능하게 하는 핵심 메커니즘인 '바인더 드라이버'가 이곳에 위치합니다.

### [ 해킹 관점 ]

- 루팅(Rooting): 커널의 취약점을 공격하여 최고 권한(root)을 획득하는 것이 목표입니다.
- 커널 익스플로잇: 드라이버나 커널 코드의 메모리 관리 허점(Use-After-Free, Buffer Overflow 등)을 이용하여 시스템 전체를 장악합니다.
- 권한 상승: 낮은 권한을 가진 앱이 커널의 버그를 이용해 시스템 권한을 얻는 공격이 주로 연구됩니다.

<br>

## 2. Hardware Abstraction Layer (HAL)
> HAL은 상위 레이어의 자바 프레임워크와 하위 레이어의 리눅스 커널 드라이버 사이를 연결하는 인터페이스 계층입니다.

### 주요 역할

- 하드웨어 표준화: 각 제조사(삼성, 퀄컴 등)마다 하드웨어가 다르더라도, 안드로이드 시스템이 동일한 방식으로 카메라나 블루투스를 호출할 수 있게 표준 라이브러리(.so 파일)를 제공합니다.

- 모듈화: 상위 계층은 하드웨어의 복잡한 구현 방식을 몰라도 HAL API만 호출하면 하드웨어를 제어할 수 있습니다.

### [ 해킹 관점 ]

- 제조사 전용 취약점: 구글이 만든 순정 안드로이드가 아닌, 특정 제조사가 직접 구현한 HAL 모듈에서 보안 취약점이 발생하는 경우가 많습니다.
- 샌드박스 탈출: 일반 앱이 HAL 인터페이스를 비정상적으로 호출하여 커널에 접근하거나 다른 하드웨어 자원을 무단으로 사용하는 경로로 활용됩니다.

<br>

## 3. Native C/C++ Libraries & Android Runtime (ART)
> 이 계층은 안드로이드의 성능과 실행 환경을 책임집니다.

### 주요 역할

- Native C/C++ Libraries: 성능이 중요한 작업(그래픽 렌더링, 웹 브라우징, 데이터베이스)을 위해 C/C++로 작성된 라이브러리들입니다.
- Webkit (브라우저 엔진), Libc (C 표준 라이브러리), Media Framework (오디오/비디오 재생), OpenGL ES (3D 그래픽) 등
- Android Runtime (ART): 앱이 실행되는 환경입니다. 자바 코드를 기계어로 번역하여 실행하며, 효율적인 가비지 컬렉션(GC)을 제공합니다.

### [ 해킹 관점 ]

- 메모리 취약점 공격: C/C++로 작성된 네이티브 라이브러리는 메모리 관리를 수동으로 하므로, 버퍼 오버플로우 같은 취약점이 자주 발생합니다. (예: 미디어 파일을 재생만 해도 해킹되는 Stagefright 취약점)
- 리버싱 방지 우회: 많은 앱이 보안 로직을 자바가 아닌 네이티브(JNI, .so)에 숨겨두는데, 해커는 이를 분석(Reverse Engineering)하여 로직을 무력화합니다.
- ART 변조: 런타임 자체를 수정하거나 후킹하여 앱의 실행 흐름을 강제로 바꿉니다.

<br>

## 4. Java API Framework
> 개발자들이 앱을 개발할 때 사용하는 공식 도구 세트입니다. 안드로이드의 핵심 기능을 자바 언어로 제공합니다.

### 주요 역할
- Managers: 액티비티(화면), 패키지(앱 설치), 위치, 알림 등을 관리하는 서비스들입니다.
- Content Providers: 앱 간에 데이터를 안전하게 공유할 수 있는 표준 인터페이스를 제공합니다.
- View System: 버튼, 텍스트 박스 등 UI 요소를 생성하고 관리합니다.

### [ 해킹 관점 ]
- IPC Hijacking: 앱 간 데이터 전달 과정(Intent)에서 데이터를 가로채거나 가짜 데이터를 주입합니다.
- Content Provider Leak: 잘못 설정된 데이터 제공자를 통해 앱의 내부 DB(연락처, 메시지 등) 정보를 무단으로 탈취합니다.
- 권한 우회: 프레임워크의 논리적 허점을 찾아 앱에 허용되지 않은 권한을 행사합니다.

<br>

## 5. Application Layer
> 가장 최상위 계층으로, 사용자가 직접 눈으로 보고 만지는 앱들이 위치합니다.

### 주요 역할

- 기본 앱: 전화, 주소록, 브라우저 등 안드로이드 설치 시 포함된 앱입니다.
- 사용자 앱: 구글 플레이 스토어에서 다운로드한 모든 앱이 이 계층에서 실행됩니다.

### [ 해킹 관점 ]

- 애플리케이션 보안 취약점: 소스코드 내 중요 정보(비밀번호, API 키) 노출, 암호화 미흡, 비즈니스 로직 취약점 등을 공격합니다.
- Frida 후킹: 실행 중인 앱의 메모리에 침투하여 특정 함수를 변조합니다. 예를 들어, 로그인 체크 함수를 무조건 '성공'으로 반환하게 만드는 식입니다.
- 리패키징(Repackaging): 정상 앱을 뜯어서 악성코드를 심은 뒤 다시 배포하는 공격을 수행합니다.